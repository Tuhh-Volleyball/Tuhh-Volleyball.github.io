<!doctype html>
<html lang="de" data-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Volleyball AG - TUHH</title>
  <meta name="description" content="TUHH Volleyball AG - Infos, Training, Vision, Kontakt">
  <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css">
  <style>
    /* Kleine kosmetische Helfer */
    header img{max-width:180px;height:auto;display:block;margin:0 auto 1rem;}
    header h1, header p{text-align:center}
    .topbar{display:flex;justify-content:flex-end;gap:.5rem;margin: .5rem auto 0;max-width:min(1100px,92vw);}
    .topbar button{white-space:nowrap}
    .center{text-align:center}
    .qr{max-width:220px;height:auto;border-radius:12px}
    figure{margin:0}
    footer{margin-top:2rem}

    /* Zusatz für Einladungsmodus*/
    .hidden{display:none !important}
    .badge{display:inline-block;padding:.15rem .5rem;border-radius:.5rem;font-size:.8rem}
    .badge.ok{background:var(--primary-focus);color:var(--primary-inverse)}
  </style>
</head>
<body>
  <!-- Theme-Umschalter oben rechts -->
  <div class="topbar">
    <button id="themeToggle" class="secondary outline" aria-label="Farbschema wechseln">🌗 Auto</button>
  </div>

  <header class="container">
    <img src="assets/logo.png" alt="TUHH Volleyball Logo">
    <h1>🏐 TUHH Volleyball</h1>
    <p>Willkommen bei <strong>TUHH Volleyball</strong>! Wir sind eine junge Gruppe von Studierenden und Freunden, die gemeinsam Volleyball spielen – locker, motiviert und mit viel Spaß.</p>
  </header>

  <main class="container">
    <article>
      <h2>📅 Training & Infos <small id="inviteBadge" class="badge ok hidden">Einladungen heute aktiv</small></h2>
        <p>Alle Trainingszeiten und Neuigkeiten teilen wir in unserer WhatsApp-Gruppe.</p>
      
      <!-- ▼ Dieser Bereich wird nur an ausgewählten Tagen gezeigt -->
      <div id="inviteBlock" class="grid hidden">
        <div class="center">
          <p>👉 <strong>Wichtig:</strong> Der folgende Link führt zunächst in eine <em>Interessierten-Gruppe</em>. Von dort bekommt ihr die Infos und Zugang zur eigentlichen Trainingsgruppe.</p>
          <p><a role="button" href="https://bit.ly/volleyballtuhh" target="_blank" rel="noopener">Hier der Einladungslink für Interessierte</a></p>
          <p class="secondary">Auf dem Handy einfach tippen.</p>
        </div>
        <div class="center">
          <figure>
            <img class="qr" src="assets/qr.jpg" alt="QR-Code zum WhatsApp-Einladungslink">
            <figcaption class="secondary">Oder QR-Code scannen 📱</figcaption>
          </figure>
        </div>
      </div>
      <!-- ▲ Ende: nur zeitweise sichtbar -->

      <!-- Fallback, wenn Einladungen deaktiviert sind -->
      <p id="inviteFallback" class="center">
        Weitere Informationen erhälst du per E-Mail (siehe unten).
      </p>
    </article>


    <article id="termine">
      <h2>🗓️ Termine</h2>
      <p class="secondary">Hier siehst du, wann wir spielen. Du kannst unten zwischen Monatsansicht und kompakter Agenda wechseln.</p>

      <div class="grid">
        <div>
          <nav class="center" style="margin-bottom:.5rem">
            <button class="secondary outline" id="calendarToggle">Monat</button>
          </nav>


          <div class="calendar-frame" style="position:relative;width:100%;min-height:600px">
            <iframe
              id="gcalFrame"
              title="TUHH Volleyball - Termine"
              loading="lazy"
              style="border:0;width:100%;height:70vh;min-height:600px;border-radius:12px"
              src="https://calendar.google.com/calendar/embed?src=fbc172ce78d7237e74a8defdee5ec4ad32ee1c84675a2b9e1adcc31e60351b26@group.calendar.google.com&ctz=Europe%2FBerlin&mode=MONTH&showTitle=0&showPrint=0&showTabs=0&wkst=2&showCalendars=0&showTz=0"
            ></iframe>
          </div>

          <p class="secondary center" style="margin-top:.5rem">
            👉 Zum eigenen Kalender hinzufügen:
            <a href="https://calendar.google.com/calendar/u/0/r?cid=fbc172ce78d7237e74a8defdee5ec4ad32ee1c84675a2b9e1adcc31e60351b26@group.calendar.google.com" target="_blank" rel="noopener">In Google Kalender abonnieren</a>
          </p>
        </div>
      </div>
    </article>


    <article>
      <h2>🙌 Wer wir sind</h2>
      <p>Wir sind rund 20-25 Leute zwischen 20 und 25 Jahren. Ob Anfänger oder erfahren – jede*r ist willkommen!</p>
    </article>

    <article>
      <h2>✨ Unsere Vision</h2>
      <p>Dies ist erst der Anfang - eines Tages soll daraus eine <strong>richtige Vereinswebseite</strong> entstehen. Bis dahin halten wir euch hier und in der WhatsApp-Gruppe auf dem Laufenden.</p>
    </article>

    <article>
      <h2>✉️ Kontakt</h2>
      <ul>
        <li>E-Mail: <a href="mailto:volleyball@tuhh.de?subject=Deine%20Anfrage%20zur%20Volleyball%20AG&amp;body=Hallo%20liebes%20Orga-Team%2C%0A%0Aich%20interessiere%20mich%20f%C3%BCr%20die%20Volleyball%20AG%20und%20w%C3%BCrde%20gerne%20weitere%20Infos%20zu%20den%20Trainingszeiten%20erhalten.%0A%0AViele%20Gr%C3%BC%C3%9Fe%2C%0A%5BDein%20Name%5D">volleyball@tuhh.de</a></li>
      </ul>
      <p>Viele Grüße,<br>Eure Orga-Truppe 🙂<br><strong>Alexandra, Clemens, Sascha</strong></p>
    </article>

    <footer class="center">
      <small>Letztes Update: Sept 2025</small>
      <div style="margin:1rem 0">
        <a href="impressum.html">Impressum</a>
      </div>
      <div>
        <a href="https://www.asta.tuhh.de/" target="_blank" rel="noopener">
          <img src="assets/asta.png" alt="AStA TUHH Logo" style="max-height:50px;width:auto">
        </a>
      </div>
    </footer>

  </main>

  <!-- Theme-Script: merkt sich die Auswahl in localStorage -->
  <script>
    (function(){
      const root = document.documentElement;
      const btn  = document.getElementById('themeToggle');
      const KEY  = 'tuhh-volleyball-theme';
      const valid = new Set(['light','dark']);

      function label(mode){
        return mode === 'light' ? '☀️ Hell' : '🌙 Dunkel';
      }
      function normalize(mode){
        // Falls noch alter Wert 'auto' in localStorage liegt → auf 'light' setzen
        return valid.has(mode) ? mode : 'light';
      }
      function apply(mode){
        mode = normalize(mode);
        root.setAttribute('data-theme', mode);
        btn.textContent = label(mode);
        try { localStorage.setItem(KEY, mode); } catch {}
      }

      // Startmodus: gespeicherter Wert oder 'light'
      let start = 'light';
      try { start = normalize(localStorage.getItem(KEY) || 'light'); } catch {}
      apply(start);

      // Klick toggelt zwischen light ↔ dark
      btn.addEventListener('click', () => {
        const cur = root.getAttribute('data-theme') || 'light';
        const next = (cur === 'light') ? 'dark' : 'light';
        apply(next);
      });
    })();
  </script>
<!-- Kalender-Ansicht Umschalter -->
  <script>
    (function(){
      const frame = document.getElementById('gcalFrame');
      const btn   = document.getElementById('calendarToggle');
      if(!frame || !btn) return;

      function getMode(){
        const url = new URL(frame.src);
        return url.searchParams.get('mode') || 'AGENDA';
      }
      function setMode(mode){
        const url = new URL(frame.src);
        url.searchParams.set('mode', mode);
        frame.src = url.toString();
        btn.textContent = (mode === 'MONTH') ? 'Agenda' : 'Monat';
      }

      // Klick = Toggle zwischen MONTH und AGENDA
      btn.addEventListener('click', (e)=>{
        e.preventDefault();
        const cur = getMode();
        setMode(cur === 'MONTH' ? 'AGENDA' : 'MONTH');
      });

      // Initial Beschriftung richtig setzen
      setMode(getMode());
    })();
  </script>



<script>
  (function(){
    // ==== KONFIGURATION: Einladungsfenster (Start/Ende im Format YYYY-MM-DD) ====
    // Trage hier pro Semester EINEN Tag als Start/Ende ein – oder auch mehrere Fenster.
    const INVITE_WINDOWS = [
      // Beispiel: AG-Vorstellung am 2025-10-15
      { start: '2025-09-09', end: '2025-09-10' },
      // nächstes Semester einfach eine neue Zeile ergänzen
      // { start: '2026-04-14', end: '2026-04-14' },
    ];
    const TIMEZONE = 'Europe/Berlin';

    // ==== HILFSFUNKTIONEN ====
    const $ = sel => document.querySelector(sel);

    function nowInTZ(tz){
      // "Lokale" Zeit in der gewünschten TZ erzeugen
      return new Date(new Date().toLocaleString('en-US', { timeZone: tz }));
    }
    function startOfDayTZ(isoDate, tz){
      // 00:00 in TZ
      const [y,m,d] = isoDate.split('-').map(Number);
      const s = new Date(Date.UTC(y, m-1, d, 0, 0, 0));
      // Korrigierte lokale Zeit als Datum-Objekt in TZ
      const sLocal = new Date(s.toLocaleString('en-US', { timeZone: tz }));
      return sLocal;
    }
    function endOfDayTZ(isoDate, tz){
      // 23:59:59.999 in TZ
      const [y,m,d] = isoDate.split('-').map(Number);
      const e = new Date(Date.UTC(y, m-1, d, 23, 59, 59, 999));
      const eLocal = new Date(e.toLocaleString('en-US', { timeZone: tz }));
      return eLocal;
    }
    function inAnyWindow(dt, windows, tz){
      return windows.some(w => dt >= startOfDayTZ(w.start, tz) && dt <= endOfDayTZ(w.end, tz));
    }
    function getQueryFlag(name){
      const p = new URLSearchParams(location.search);
      if(!p.has(name)) return null;
      const v = p.get(name);
      return (v === '' || v === '1' || v.toLowerCase() === 'true') ? true
           : (v === '0' || v.toLowerCase() === 'false') ? false
           : true; // wenn nur ?invite ohne Wert
    }

    // ==== LOGIK ====
    const inviteBlock   = $('#inviteBlock');
    const inviteFallback= $('#inviteFallback');
    const inviteBadge   = $('#inviteBadge');
    if(!inviteBlock || !inviteFallback) return;

    const override = getQueryFlag('invite'); // ?invite=1 / ?invite=0
    const todayTZ  = nowInTZ(TIMEZONE);
    const activeByWindow = inAnyWindow(todayTZ, INVITE_WINDOWS, TIMEZONE);
    const active = (override === null) ? activeByWindow : override;

    // Sichtbarkeit umschalten
    if(active){
      inviteBlock.classList.remove('hidden');
      inviteFallback.classList.add('hidden');
      if(inviteBadge) inviteBadge.classList.remove('hidden');
    }else{
      inviteBlock.classList.add('hidden');
      inviteFallback.classList.remove('hidden');
      if(inviteBadge) inviteBadge.classList.add('hidden');
    }
  })();
</script>


</body>
</html>
