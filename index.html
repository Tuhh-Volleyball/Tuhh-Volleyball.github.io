<!doctype html>
<html lang="de" data-theme="light">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Volleyball AG - TUHH</title>
  <meta name="description" content="TUHH Volleyball AG - Infos, Training, Vision, Kontakt">
  <link rel="icon" href="assets/ball.png" type="image/png">
  <link rel="apple-touch-icon" href="assets/ball.png">
  <link rel="stylesheet" href="assets/pico.css"> <!-- https://unpkg.com/@picocss/pico@2.1.1/css/pico.min.css -->
  <link rel="stylesheet" href="assets/style.css">
</head>

<body>
  <nav class="container topnav" aria-label="Hauptnavigation">
    <div class="brand-row">
      <strong class="brand">
        <img src="assets/ball.png" alt="Volleyball" class="logo-ball">
        TUHH Volleyball
      </strong>

      <!-- Rechts: nur Theme + Burger -->
      <ul class="nav-inline">
        <li>
          <button id="themeToggle" class="secondary outline" aria-label="Farbschema wechseln">🌗</button>
        </li>
        <li>
          <button class="menu-toggle" aria-expanded="false" aria-controls="mobileMenu"
            aria-label="Menü öffnen">☰</button>
        </li>
      </ul>
    </div>

    <!-- Aufklappmenü (Handy): nur Startseite & Impressum -->
    <ul id="mobileMenu" class="nav-drawer" hidden>
      <li><a href="index.html">Startseite</a></li>
      <li><a href="impressum.html">Impressum</a></li>
    </ul>

    <!-- Desktop-Links (wie gehabt) -->
    <ul class="nav-links-desktop">
      <li><a href="#training">Training</a></li>
      <li><a href="#termine">Termine</a></li>
      <li><a href="#team">Team</a></li>
      <li><a href="#vision">Vision</a></li>
      <li><a href="#kontakt">Kontakt</a></li>
      <li><a href="impressum.html">Impressum</a></li>
    </ul>
  </nav>
  <div id="menuBackdrop" hidden></div>
  
  <header class="container">
    <h1>
      <img src="assets/ball.png" alt="Volleyball" class="logo-ball">
      <span class="tuhh">TUHH</span> Volleyball
    </h1>

    <p>Willkommen bei der <strong>Volleyball AG</strong>! <br>
      Wir sind eine Gruppe von Studierenden und Freunden, die gemeinsam Volleyball spielen - locker, motiviert und
      mit viel Spaß.</p>
  </header>

  <main class="container">
    <article id="training">
      <h2>📅 Training & Infos <small id="inviteBadge" class="badge ok hidden">Einladungen heute aktiv</small></h2>
      <p>Alle Trainingszeiten und Neuigkeiten teilen wir in unserer WhatsApp-Gruppe.</p>

      <!-- ▼ Dieser Bereich wird nur an ausgewählten Tagen gezeigt -->
      <div id="inviteBlock" class="grid hidden">
        <div class="center">
          <p>👉 <strong>Wichtig:</strong> Der folgende Link führt zunächst in eine <em>Interessierten-Gruppe</em>. Von
            dort bekommt ihr die Infos und Zugang zur eigentlichen Trainingsgruppe.</p>
          <p><a role="button" href="https://bit.ly/volleyballtuhh" target="_blank" rel="noopener">Hier der
              Einladungslink für Interessierte</a></p>
          <p class="secondary">Auf dem Handy einfach tippen.</p>
        </div>
        <div class="center">
          <figure>
            <img class="qr" src="assets/qr.jpg" alt="QR-Code zum WhatsApp-Einladungslink">
            <figcaption class="secondary">Oder QR-Code scannen 📱</figcaption>
          </figure>
        </div>
      </div>
      <!-- ▲ Ende: nur zeitweise sichtbar -->

      <!-- Fallback, wenn Einladungen deaktiviert sind -->
      <p id="inviteFallback" class="center">
        Weitere Informationen erhälst du per E-Mail (siehe unten).
      </p>
    </article>


    <article id="termine">
      <h2>🗓️ Termine</h2>
      <p class="secondary">Hier siehst du, wann wir spielen. Du kannst unten zwischen Monatsansicht und kompakter Agenda
        wechseln.</p>

      <div class="grid">
        <div>
          <nav class="center" style="margin-bottom:.5rem">
            <button class="secondary outline" id="calendarToggle">Monat</button>
          </nav>


          <div class="calendar-frame" style="position:relative;width:100%;min-height:600px">
            <iframe id="gcalFrame" title="TUHH Volleyball - Termine" loading="lazy"
              style="border:0;width:100%;height:70vh;min-height:600px;border-radius:12px"
              src="https://calendar.google.com/calendar/embed?src=fbc172ce78d7237e74a8defdee5ec4ad32ee1c84675a2b9e1adcc31e60351b26@group.calendar.google.com&ctz=Europe%2FBerlin&mode=MONTH&showTitle=0&showPrint=0&showTabs=0&wkst=2&showCalendars=0&showTz=0"></iframe>
          </div>

          <p class="secondary center" style="margin-top:.5rem">
            👉 Zum eigenen Kalender hinzufügen: <br>
            <a href="https://calendar.google.com/calendar/u/0/r?cid=fbc172ce78d7237e74a8defdee5ec4ad32ee1c84675a2b9e1adcc31e60351b26@group.calendar.google.com"
              target="_blank" rel="noopener">In Google Kalender abonnieren</a>
          </p>
        </div>
      </div>
    </article>


    <article id="team">
      <h2>🙌 Wer wir sind</h2>
      <p>Wir sind rund 20-25 Leute zwischen 20 und 25 Jahren. Ob Anfänger oder erfahren - jede*r ist willkommen!</p>
    </article>

    <article id="vision">
      <h2>✨ Unsere Vision</h2>
      <p>Dies ist erst der Anfang - eines Tages soll daraus eine <strong>richtige Vereinswebseite</strong> entstehen.
        Bis dahin halten wir euch hier und in der WhatsApp-Gruppe auf dem Laufenden.</p>
    </article>

    <article id="kontakt">
      <h2>✉️ Kontakt</h2>
      <ul>
        <li>E-Mail: <a
            href="mailto:volleyball@tuhh.de?subject=Deine%20Anfrage%20zur%20Volleyball%20AG&amp;body=Hallo%20liebes%20Orga-Team%2C%0A%0Aich%20interessiere%20mich%20f%C3%BCr%20die%20Volleyball%20AG%20und%20w%C3%BCrde%20gerne%20weitere%20Infos%20zu%20den%20Trainingszeiten%20erhalten.%0A%0AViele%20Gr%C3%BC%C3%9Fe%2C%0A%5BDein%20Name%5D">volleyball@tuhh.de</a>
        </li>
      </ul>
      <p>Viele Grüße,<br>Eure Orga-Truppe 🙂<br><strong>Alexandra, Clemens, Sascha</strong></p>
    </article>

    <footer class="center footer">
      <p>
        <small>© 2025 Volleyball AG TUHH</small>
      </p>

      <p>
        <a href="impressum.html">Impressum</a>
      </p>

      <p>
        <a href="https://www.asta.tuhh.de/" target="_blank" rel="noopener">
          <img src="assets/asta.png" alt="AStA TUHH Logo" class="asta-logo">
        </a>
      </p>

      <p>
        <small>Letztes Update: Sept 2025</small>
      </p>
    </footer>



  </main>

  <!-- Theme-Script: merkt sich die Auswahl in localStorage -->
  <script src="assets/theme-toggle.js" defer></script>
  <!-- Kalender-Ansicht Umschalter -->
  <script src="assets/calender.js" defer></script>



  <script>
    (function () {
      // ==== KONFIGURATION: Einladungsfenster (Start/Ende im Format YYYY-MM-DD) ====
      // Trage hier pro Semester EINEN Tag als Start/Ende ein – oder auch mehrere Fenster.
      const INVITE_WINDOWS = [
        // Beispiel: AG-Vorstellung am 2025-10-15
        { start: '2025-09-09', end: '2025-09-10' },
        // nächstes Semester einfach eine neue Zeile ergänzen
        // { start: '2026-04-14', end: '2026-04-14' },
      ];
      const TIMEZONE = 'Europe/Berlin';

      // ==== HILFSFUNKTIONEN ====
      const $ = sel => document.querySelector(sel);

      function nowInTZ(tz) {
        // "Lokale" Zeit in der gewünschten TZ erzeugen
        return new Date(new Date().toLocaleString('en-US', { timeZone: tz }));
      }
      function startOfDayTZ(isoDate, tz) {
        // 00:00 in TZ
        const [y, m, d] = isoDate.split('-').map(Number);
        const s = new Date(Date.UTC(y, m - 1, d, 0, 0, 0));
        // Korrigierte lokale Zeit als Datum-Objekt in TZ
        const sLocal = new Date(s.toLocaleString('en-US', { timeZone: tz }));
        return sLocal;
      }
      function endOfDayTZ(isoDate, tz) {
        // 23:59:59.999 in TZ
        const [y, m, d] = isoDate.split('-').map(Number);
        const e = new Date(Date.UTC(y, m - 1, d, 23, 59, 59, 999));
        const eLocal = new Date(e.toLocaleString('en-US', { timeZone: tz }));
        return eLocal;
      }
      function inAnyWindow(dt, windows, tz) {
        return windows.some(w => dt >= startOfDayTZ(w.start, tz) && dt <= endOfDayTZ(w.end, tz));
      }
      function getQueryFlag(name) {
        const p = new URLSearchParams(location.search);
        if (!p.has(name)) return null;
        const v = p.get(name);
        return (v === '' || v === '1' || v.toLowerCase() === 'true') ? true
          : (v === '0' || v.toLowerCase() === 'false') ? false
            : true; // wenn nur ?invite ohne Wert
      }

      // ==== LOGIK ====
      const inviteBlock = $('#inviteBlock');
      const inviteFallback = $('#inviteFallback');
      const inviteBadge = $('#inviteBadge');
      if (!inviteBlock || !inviteFallback) return;

      const override = getQueryFlag('invite'); // ?invite=1 / ?invite=0
      const todayTZ = nowInTZ(TIMEZONE);
      const activeByWindow = inAnyWindow(todayTZ, INVITE_WINDOWS, TIMEZONE);
      const active = (override === null) ? activeByWindow : override;

      // Sichtbarkeit umschalten
      if (active) {
        inviteBlock.classList.remove('hidden');
        inviteFallback.classList.add('hidden');
        if (inviteBadge) inviteBadge.classList.remove('hidden');
      } else {
        inviteBlock.classList.add('hidden');
        inviteFallback.classList.remove('hidden');
        if (inviteBadge) inviteBadge.classList.add('hidden');
      }
    })();
  </script>
  <!-- Menü-Script: -->
  <script src="assets/menu.js" defer></script>

</body>

</html>