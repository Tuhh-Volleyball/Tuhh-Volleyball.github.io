<!doctype html>
<html lang="de">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Interaktive Volleyball‚ÄëFigur ‚Äì Drop‚Äëin Widget</title>
  <style>
    :root {
      --accent: #ffc016;
      /* Spielfeld-Gr√ºn */
      --accent-2: #38b1c2;
      /* Beach-Sand */
      --fg: #13141a;
      --bg: rgba(255, 255, 255, .96);
      --shadow: 0 10px 30px rgba(0, 0, 0, .12), 0 2px 10px rgba(0, 0, 0, .08);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --fg: #eaeef7;
        --bg: rgba(19, 20, 26, .92);
      }
    }

    /* --- Container: unten rechts schwebend --- */
    #mascot-container {
      position: fixed;
      inset: auto 24px 24px auto;
      z-index: 9999;
      display: grid;
      place-items: center;
      width: 180px;
      height: 180px;
      pointer-events: none;
      /* Bubble klickbar lassen */
    }

    /* Click‚ÄëArea f√ºr Interaktionen */
    #mascot-hitbox {
      position: absolute;
      inset: 0;
      pointer-events: auto;
    }

    /* Karte/Badge hinter der Figur */
    #mascot-card {
      position: absolute;
      bottom: -8px;
      left: -8px;
      right: -8px;
      top: 28px;
      background: var(--bg);
      border: 1px solid rgba(0, 0, 0, .06);
      border-radius: 24px;
      box-shadow: var(--shadow);
      filter: drop-shadow(0 4px 16px rgba(0, 0, 0, .08));
      transition: transform .2s ease;
    }

    #mascot {
      width: 160px;
      height: 160px;
      position: relative;
      animation: bob 3.6s ease-in-out infinite;
    }

    @keyframes bob {

      0%,
      100% {
        transform: translateY(0)
      }

      50% {
        transform: translateY(-6px)
      }
    }

    /* Blick/Lidschlag */
    .pupil {
      transition: transform .06s linear;
    }

    .eyelid {
      animation: blink 5s infinite;
      transform-origin: center;
    }

    @keyframes blink {

      0%,
      97%,
      100% {
        transform: scaleY(1)
      }

      98% {
        transform: scaleY(.05)
      }

      99% {
        transform: scaleY(1)
      }
    }

    /* Winken bei Hover/Klick */
    .arm {
      transform-origin: 125px 70px;
    }

    #mascot-container:hover .arm {
      animation: wave .9s ease-in-out infinite;
    }

    @keyframes wave {

      0%,
      100% {
        transform: rotate(0)
      }

      50% {
        transform: rotate(-16deg)
      }
    }

    /* Sprechblase */
    #bubble {
      position: absolute;
      right: 180px;
      bottom: 90px;
      max-width: 280px;
      pointer-events: auto;
      background: var(--bg);
      color: var(--fg);
      border: 1px solid rgba(0, 0, 0, .06);
      padding: 12px 14px;
      border-radius: 14px;
      box-shadow: var(--shadow);
      opacity: 0;
      transform: translateY(6px) scale(.98);
      transition: all .18s ease;
      font: 500 14px/1.35 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    #bubble.visible {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    #bubble:after {
      content: "";
      position: absolute;
      right: -8px;
      bottom: 12px;
      width: 16px;
      height: 16px;
      background: var(--bg);
      border: 1px solid rgba(0, 0, 0, .06);
      border-left: none;
      border-bottom: none;
      transform: rotate(45deg);
      box-shadow: 8px -8px 0 var(--bg);
      /* Kanten kaschieren */
    }

    /* CTA/Buttonzeile (optional) */
    .toolbar {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .btn {
      pointer-events: auto;
      user-select: none;
      border: 1px solid currentColor;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
      cursor: pointer;
      opacity: .9
    }

    .btn:hover {
      opacity: 1
    }

    /* Bewegungsreduktion respektieren */
    @media (prefers-reduced-motion: reduce) {
      #mascot {
        animation: none
      }

      .eyelid {
        animation: none
      }

      #mascot-card {
        transition: none
      }
    }

    /* Volleyball-Ball Animation */
    #ball {
      transform-origin: 120px 70px;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, .15));
    }

    .serve #ball {
      animation: serve 1s ease-in forwards;
    }

    @keyframes serve {
      0% {
        transform: translate(0, 0) rotate(0)
      }

      35% {
        transform: translate(-20px, -60px) rotate(-90deg)
      }

      60% {
        transform: translate(-40px, -120px) rotate(-200deg)
      }

      100% {
        transform: translate(-20px, -140px) rotate(-320deg)
      }
    }

    /* Mini-Netz Illustration (dezent) */
    #mini-net {
      opacity: .12
    }
  </style>
</head>

<body>
  <!--
    ‚úÖ So verwendest du das Widget:
    1) Kopiere alles in deine Seite (am besten direkt vor </body>).  
    2) Passe Farben oben in :root an.  
    3) Texte/Jokes unten im JS anpassen.
  -->

  <div id="mascot-container" aria-live="polite" aria-label="Webseiten-Assistent, humorvoll">
    <div id="mascot-card" aria-hidden="true"></div>

    <!-- Klickfl√§che f√ºr Interaktionen -->
    <div id="mascot-hitbox" title="Klick mich! Ich habe Spr√ºche auf Lager."></div>

    <!-- Sprechblase -->
    <div id="bubble" role="status">
      <div id="bubble-text">Baggern, Pritschen, Schmettern ‚Äî klick f√ºr einen Spruch üèê</div>
      <div class="toolbar">
        <button class="btn" id="btn-joke" aria-label="Noch einen Spruch">Noch einen</button>
        <button class="btn" id="btn-hide" aria-label="Blase schlie√üen">Schlie√üen</button>
      </div>
    </div>

    <!-- Die Figur: reines SVG, keine Assets n√∂tig -->
    <svg id="mascot" viewBox="0 0 160 160" aria-hidden="true">
      <!-- K√∂rper -->
      <defs>
        <radialGradient id="g1" cx="40%" cy="35%" r="70%">
          <stop offset="0%" stop-color="var(--accent-2)" stop-opacity=".95" />
          <stop offset="100%" stop-color="var(--accent)" />
        </radialGradient>
      </defs>
      <g>
        <ellipse cx="80" cy="88" rx="58" ry="52" fill="url(#g1)" />
        <ellipse cx="80" cy="42" rx="42" ry="32" fill="url(#g1)" opacity=".92" />
        <circle cx="80" cy="118" r="20" fill="url(#g1)" opacity=".9" />
      </g>

      <!-- Gesicht -->
      <g id="face">
        <!-- Augen Wei√ü -->
        <ellipse cx="60" cy="70" rx="16" ry="12" fill="#fff" />
        <ellipse cx="100" cy="70" rx="16" ry="12" fill="#fff" />
        <!-- Pupillen -->
        <circle id="pupil-left" class="pupil" cx="60" cy="70" r="5" fill="#1f2937" />
        <circle id="pupil-right" class="pupil" cx="100" cy="70" r="5" fill="#1f2937" />
        <!-- Lider -->
        <ellipse class="eyelid" cx="60" cy="70" rx="16" ry="12" fill="transparent" stroke="#1f293710"
          stroke-width="2" />
        <ellipse class="eyelid" cx="100" cy="70" rx="16" ry="12" fill="transparent" stroke="#1f293710"
          stroke-width="2" />
        <!-- Mund -->
        <path d="M55 92 C 70 110, 90 110, 105 92" fill="none" stroke="#0b1324" stroke-width="4"
          stroke-linecap="round" />
      </g>

      <!-- Arm zum Winken -->
      <g class="arm">
        <path d="M120 70 q18 -10 18 8 q0 16 -10 22" fill="none" stroke="#ffffff" stroke-width="10"
          stroke-linecap="round" />
      </g>

      <!-- Volleyball (rechts an der Hand) -->
      <g id="ball" transform="translate(-60,50) scale(0.35)">
        <path d="M32 2C15.43 2 2 15.432 2 32.001C2 48.572 15.43 62 32 62c16.568 0 30-13.428 30-29.999C62 15.432 48.568 2 32 2m27.957 28.467c-4.51-4.582-14.244-11.716-31.352-12.001c-.102-2.957.295-5.729.878-8.134c12.628.281 22.294 5.654 27.823 9.697a27.8 27.8 0 0 1 2.651 10.438M31.684 4.008C31.789 4.007 31.895 4 32 4c9.709 0 18.275 4.968 23.3 12.493c-5.874-3.706-14.543-7.615-25.325-7.958a34.946 34.946 0 0 1 1.709-4.527M19.197 7.111A27.782 27.782 0 0 1 29.67 4.104c-2.35 5.518-5.678 17.083 1.359 27.939a24.249 24.249 0 0 1-7.444 8.712c-8.853-16.066-6.09-28.736-4.388-33.644M9.109 15.905a28.208 28.208 0 0 1 7.726-7.424c-1.73 6.158-3.118 18.228 5.249 33.292c-2.51 1.565-5.105 2.61-7.481 3.307c-6.139-11.201-6.256-22.384-5.494-29.175M4 32.001c0-4.556 1.101-8.856 3.039-12.662c-.311 6.968.592 16.567 5.764 26.216a35.23 35.23 0 0 1-4.837.79A27.82 27.82 0 0 1 4 32.001m5.067 16.035c5.94-.716 17.664-3.599 23.563-15.154a24.183 24.183 0 0 1 11.263 2.094c-9.485 15.701-21.845 19.641-26.942 20.618a28.21 28.21 0 0 1-7.884-7.558m20.625 11.861a27.798 27.798 0 0 1-10.367-2.943c6.198-1.581 17.343-6.414 26.202-21.188c2.609 1.391 4.813 3.117 6.604 4.827c-6.604 10.871-16.174 16.557-22.439 19.304m4.066.042c6.168-3.226 13.956-8.789 19.686-18.022a35.487 35.487 0 0 1 3.021 3.681c-4.52 8.1-12.942 13.733-22.707 14.341m-1.202-28.863a24.194 24.194 0 0 1-3.819-10.801c18.174.361 27.756 8.938 31.234 12.916a27.788 27.788 0 0 1-2.589 10.613c-3.632-4.805-11.969-13.388-24.826-12.728" fill="#000000"></path>
      </g>

      <!-- Schimmer -->
      <ellipse cx="58" cy="46" rx="10" ry="6" fill="#fff" opacity=".7" />
    </svg>
  </div>

  <script>
    // --- Utilities ---
    const $ = (sel, parent = document) => parent.querySelector(sel);
    const bubble = $('#bubble');
    const bubbleText = $('#bubble-text');
    const hitbox = $('#mascot-hitbox');
    const btnJoke = $('#btn-joke');
    const btnHide = $('#btn-hide');
    const pL = $('#pupil-left');
    const pR = $('#pupil-right');
    const container = $('#mascot-container');
    const ball = document.getElementById('ball');

    const JOKES = [
      "Kein Aus! Ich bin immer im Spiel ‚Äî au√üer du klickst auf Schlie√üen.",
      "Ich baggere keine Daten ‚Äî nur B√§lle.",
      "Unsere Taktik: erst pritschen, dann pitchen.",
      "Schmetterling? Nein, Schmetter-BALL!",
      "Timeout? Nur wenn der Kaffee alle ist.",
      "Service-W√ºste? Nicht hier: Ich serviere Spr√ºche am laufenden Band.",
      "Block? Gern ‚Äî gegen Bugs.",
      "Pro Tipp: Dr√ºck ‚ÄòV‚Äô f√ºr einen Aufschlag!",
    ];

    let lastJoke = -1;
    function nextJoke() {
      let i; do { i = Math.floor(Math.random() * JOKES.length) } while (i === lastJoke);
      lastJoke = i; return JOKES[i];
    }

    function showBubble(text) {
      bubbleText.textContent = text || nextJoke();
      bubble.classList.add('visible');
      clearTimeout(showBubble._t);
      showBubble._t = setTimeout(() => bubble.classList.remove('visible'), 4800);
    }

    // Klick-Interaktionen
    hitbox.addEventListener('click', () => {
      showBubble();
      container.querySelector('#mascot-card').style.transform = 'translateY(-2px)';
      setTimeout(() => container.querySelector('#mascot-card').style.transform = '', 120);
      triggerServe();
    });
    btnJoke.addEventListener('click', e => { e.stopPropagation(); showBubble(); triggerServe(); });
    btnHide.addEventListener('click', e => { e.stopPropagation(); bubble.classList.remove('visible'); });

    // Tastatur: H = Hilfe, J = Witz, B = Blase toggeln
    window.addEventListener('keydown', (e) => {
      const k = e.key.toLowerCase();
      if (k === 'h') { showBubble('Shortcuts: H = Hilfe, J = Witz, B = Blase, V = Volley-Aufschlag'); }
      if (k === 'j') { showBubble(); triggerServe(); }
      if (k === 'b') { bubble.classList.toggle('visible'); }
      if (k === 'v') { triggerServe(); showBubble('Aufschlag! üèê'); }
    });

    // Pupillen folgen Maus (sanft innerhalb des Augenrahmens)
    document.addEventListener('mousemove', (e) => {
      const rect = container.getBoundingClientRect();
      const cx = rect.left + rect.width / 2; const cy = rect.top + rect.height / 2;
      const dx = (e.clientX - cx) / rect.width; // normiert ca. -0.5 .. 0.5
      const dy = (e.clientY - cy) / rect.height;
      const max = 4; // maximale Pupillen‚ÄëVerschiebung in px
      const tx = Math.max(-1, Math.min(1, dx)) * max;
      const ty = Math.max(-1, Math.min(1, dy)) * max;
      pL.style.transform = `translate(${tx}px, ${ty}px)`;
      pR.style.transform = `translate(${tx}px, ${ty}px)`;
    });

    // Extern steuerbar: window.Mascot.say('Text')
    window.Mascot = {
      say(text) { showBubble(text); },
      hide() { bubble.classList.remove('visible'); },
      setColors(a, b) { document.documentElement.style.setProperty('--accent', a); document.documentElement.style.setProperty('--accent-2', b || a); }
    };

    // Serve-Animation
    function triggerServe() {
      if (!ball) return;
      ball.classList.remove('serve');
      void ball.offsetWidth; // reflow
      ball.classList.add('serve');
      setTimeout(() => ball.classList.remove('serve'), 1100);
    }

    // Erste Begr√º√üung verz√∂gert anzeigen
    setTimeout(() => showBubble('Willkommen! Baggern, Pritschen, Schmettern ‚Äî klick f√ºr einen Spruch üèê'), 800);
  </script>
</body>

</html>